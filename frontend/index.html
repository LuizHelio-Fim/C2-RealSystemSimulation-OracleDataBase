<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gest√£o de Estudantes</title>
    <link rel="stylesheet" href="styles/globals.css">
</head>
<body>
    <!-- Splash Screen -->
    <div class="splash-screen" id="splashScreen">
        <div class="splash-content">
            <div class="splash-logo">üìö</div>
            <h1>Sistema de Gest√£o de Estudantes</h1>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number" id="totalStudents">0</span>
                    <span class="stat-label">Alunos</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="totalCourses">0</span>
                    <span class="stat-label">Cursos</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="totalProfessors">0</span>
                    <span class="stat-label">Professores</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="totalSubjects">0</span>
                    <span class="stat-label">Mat√©rias</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="totalOffers">0</span>
                    <span class="stat-label">Ofertas</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="totalEnrollments">0</span>
                    <span class="stat-label">Matr√≠culas</span>
                </div>
            </div>

            <div class="credits">
                <h3>Criado por:</h3>
                <div class="credits-list">
                    <span class="credit-tag">Bernardo Lodi</span>
                    <span class="credit-tag">Jo√£o Guilherme</span>
                    <span class="credit-tag">Luanna Hevellyn</span>
                    <span class="credit-tag">Luiz Fim</span>
                    <span class="credit-tag">Pedro Sousa</span>
                    <span class="credit-tag">Thomas Veiga</span>
                </div>
                <p>
                    <strong>Disciplina:</strong> Banco de Dados 2025/2<br>
                    <strong>Professor:</strong> Howard Roatti
                </p>
            </div>

            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div class="app-container" id="appContainer">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">üìö SGE</div>
                <p style="color: var(--color-text-secondary); font-size: 0.875rem; margin-top: 0.5rem;">
                    Sistema de Gest√£o de Estudantes
                </p>
            </div>
            
            <nav class="sidebar-nav">
                <a class="nav-item active" data-view="dashboard">
                    <span class="nav-icon">üìä</span>
                    <span>Dashboard</span>
                </a>
                <a class="nav-item" data-view="students">
                    <span class="nav-icon">üë®‚Äçüéì</span>
                    <span>Alunos</span>
                </a>
                <a class="nav-item" data-view="courses">
                    <span class="nav-icon">üìö</span>
                    <span>Cursos</span>
                </a>
                <a class="nav-item" data-view="professors">
                    <span class="nav-icon">üë®‚Äçüè´</span>
                    <span>Professores</span>
                </a>
                <a class="nav-item" data-view="subjects">
                    <span class="nav-icon">üìñ</span>
                    <span>Mat√©rias</span>
                </a>
                <a class="nav-item" data-view="offers">
                    <span class="nav-icon">üéì</span>
                    <span>Ofertas</span>
                </a>
                <a class="nav-item" data-view="enrollments">
                    <span class="nav-icon">‚úÖ</span>
                    <span>Matr√≠culas</span>
                </a>
                <a class="nav-item" data-view="reports">
                    <span class="nav-icon">üìà</span>
                    <span>Relat√≥rios</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard View -->
            <div id="dashboardView" class="view active">
                <div class="header">
                    <h1 class="header-title">Dashboard</h1>
                    <div class="header-actions">
                        <button class="btn btn-secondary" onclick="refreshAllData()">
                            üîÑ Atualizar
                        </button>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon blue">üë®‚Äçüéì</div>
                            <div>
                                <div class="card-title">Alunos</div>
                            </div>
                        </div>
                        <div class="card-value" id="dashStudents">0</div>
                        <div class="card-description">Total de alunos cadastrados</div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon orange">üìö</div>
                            <div>
                                <div class="card-title">Cursos</div>
                            </div>
                        </div>
                        <div class="card-value" id="dashCourses">0</div>
                        <div class="card-description">Cursos dispon√≠veis</div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon blue">üë®‚Äçüè´</div>
                            <div>
                                <div class="card-title">Professores</div>
                            </div>
                        </div>
                        <div class="card-value" id="dashProfessors">0</div>
                        <div class="card-description">Professores cadastrados</div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon orange">üìñ</div>
                            <div>
                                <div class="card-title">Mat√©rias</div>
                            </div>
                        </div>
                        <div class="card-value" id="dashSubjects">0</div>
                        <div class="card-description">Mat√©rias cadastradas</div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon blue">üéì</div>
                            <div>
                                <div class="card-title">Ofertas</div>
                            </div>
                        </div>
                        <div class="card-value" id="dashOffers">0</div>
                        <div class="card-description">Ofertas semestrais</div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon blue">‚úÖ</div>
                            <div>
                                <div class="card-title">Matr√≠culas</div>
                            </div>
                        </div>
                        <div class="card-value" id="dashEnrollments">0</div>
                        <div class="card-description">Matr√≠culas ativas</div>
                    </div>
                </div>
            </div>

            <!-- Students View -->
            <div id="studentsView" class="view" style="display: none;">
                <div class="header">
                    <h1 class="header-title">Alunos</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="addStudent()">
                            ‚ûï Adicionar Aluno
                        </button>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <h2 class="table-title">Lista de Alunos</h2>
                        <div class="search-box">
                            <span>üîç</span>
                            <input type="text" placeholder="Buscar aluno..." onkeyup="filterTable('studentsTable', this.value)">
                        </div>
                    </div>
                    <div class="table-wrapper">
                        <table id="studentsTable">
                            <thead>
                                <tr>
                                    <th>Matr√≠cula</th>
                                    <th>CPF</th>
                                    <th>Nome</th>
                                    <th>Data de Nascimento</th>
                                    <th>Telefone</th>
                                    <th>Email</th>
                                    <th>Per√≠odo</th>
                                    <th>Status</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="studentsTableBody">
                                <tr><td colspan="8" style="text-align: center; padding: 2rem;">Carregando...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Courses View -->
            <div id="coursesView" class="view" style="display: none;">
                <div class="header">
                    <h1 class="header-title">Cursos</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="addCourse()">
                            ‚ûï Adicionar Curso
                        </button>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <h2 class="table-title">Lista de Cursos</h2>
                        <div class="search-box">
                            <span>üîç</span>
                            <input type="text" placeholder="Buscar curso..." onkeyup="filterTable('coursesTable', this.value)">
                        </div>
                    </div>
                    <div class="table-wrapper">
                        <table id="coursesTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nome</th>
                                    <th>Carga Hor√°ria</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="coursesTableBody">
                                <tr><td colspan="5" style="text-align: center; padding: 2rem;">Carregando...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Professors View -->
            <div id="professorsView" class="view" style="display: none;">
                <div class="header">
                    <h1 class="header-title">Professores</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="addProfessor()">
                            ‚ûï Adicionar Professor
                        </button>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <h2 class="table-title">Lista de Professores</h2>
                        <div class="search-box">
                            <span>üîç</span>
                            <input type="text" placeholder="Buscar professor..." onkeyup="filterTable('professorsTable', this.value)">
                        </div>
                    </div>
                    <div class="table-wrapper">
                        <table id="professorsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>CPF</th>
                                    <th>Nome</th>
                                    <th>Data de Nascimento</th>
                                    <th>Telefone</th>
                                    <th>Email</th>
                                    <th>Status</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="professorsTableBody">
                                <tr><td colspan="8" style="text-align: center; padding: 2rem;">Carregando...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Subjects View -->
            <div id="subjectsView" class="view" style="display: none;">
                <div class="header">
                    <h1 class="header-title">Mat√©rias</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="addSubject()">
                            ‚ûï Adicionar Mat√©ria
                        </button>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <h2 class="table-title">Lista de Mat√©rias</h2>
                        <div class="search-box">
                            <span>üîç</span>
                            <input type="text" placeholder="Buscar mat√©ria..." onkeyup="filterTable('subjectsTable', this.value)">
                        </div>
                    </div>
                    <div class="table-wrapper">
                        <table id="subjectsTable">
                            <thead>
                                <tr>
                                    <th>ID Mat√©ria</th>
                                    <th>ID Curso</th>
                                    <th>Periodo</th>
                                    <th>Nome</th>
                                    <th>Carga Hor√°ria</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="subjectsTableBody">
                                <tr><td colspan="5" style="text-align: center; padding: 2rem;">Carregando...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Offers View -->
            <div id="offersView" class="view" style="display: none;">
                <div class="header">
                    <h1 class="header-title">Ofertas</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="addOffer()">
                            ‚ûï Adicionar Oferta
                        </button>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <h2 class="table-title">Lista de Ofertas</h2>
                        <div class="search-box">
                            <span>üîç</span>
                            <input type="text" placeholder="Buscar oferta..." onkeyup="filterTable('offersTable', this.value)">
                        </div>
                    </div>
                    <div class="table-wrapper">
                        <table id="offersTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Ano</th>
                                    <th>Semestre</th>
                                    <th>ID Professor</th>
                                    <th>ID Mat√©ria</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="offersTableBody">
                                <tr><td colspan="6" style="text-align: center; padding: 2rem;">Carregando...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Enrollments View -->
            <div id="enrollmentsView" class="view" style="display: none;">
                <div class="header">
                    <h1 class="header-title">Matr√≠culas (Auto-Populada)</h1>
                    <div class="header-actions">
                        <button class="btn btn-secondary" onclick="refreshEnrollments()">
                            üîÑ Atualizar Dados
                        </button>
                        <span class="info-text">üìã Dados calculados automaticamente</span>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <h2 class="table-title">Grade Aluno (Somente Leitura)</h2>
                        <div class="search-box">
                            <span>üîç</span>
                            <input type="text" placeholder="Buscar matr√≠cula..." onkeyup="filterTable('enrollmentsTable', this.value)">
                        </div>
                    </div>
                    <div class="table-wrapper">
                        <table id="enrollmentsTable">
                            <thead>
                                <tr>
                                    <th>Matr√≠cula</th>
                                    <th>ID Oferta</th>
                                    <th>Status</th>
                                    <th>Aluno</th>
                                    <th>Mat√©ria</th>
                                </tr>
                            </thead>
                            <tbody id="enrollmentsTableBody">
                                <tr><td colspan="5" style="text-align: center; padding: 2rem;">Carregando...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Grades View -->
            <div id="gradesView" class="view" style="display: none;">
                <div class="header">
                    <h1 class="header-title">Notas</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="addGrade()">
                            ‚ûï Lan√ßar Nota
                        </button>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <h2 class="table-title">Avalia√ß√£o Aluno</h2>
                        <div class="search-box">
                            <span>üîç</span>
                            <input type="text" placeholder="Buscar nota..." onkeyup="filterTable('gradesTable', this.value)">
                        </div>
                    </div>
                    <div class="table-wrapper">
                        <table id="gradesTable">
                            <thead>
                                <tr>
                                    <th>ID Avalia√ß√£o</th>
                                    <th>ID Aluno</th>
                                    <th>Nota</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="gradesTableBody">
                                <tr><td colspan="4" style="text-align: center; padding: 2rem;">Carregando...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Reports View -->
            <div id="reportsView" class="view" style="display: none;">
                <div class="header">
                    <h1 class="header-title">Relat√≥rios</h1>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3 style="margin-bottom: 1rem; color: var(--color-primary);">Relat√≥rio de Alunos</h3>
                        <p style="color: var(--color-text-secondary); margin-bottom: 1rem;">
                            Visualize estat√≠sticas completas sobre alunos cadastrados
                        </p>
                        <button class="btn btn-secondary" onclick="generateReport('students')">
                            üìä Ver Relat√≥rio
                        </button>
                    </div>

                    <div class="dashboard-card">
                        <h3 style="margin-bottom: 1rem; color: var(--color-accent);">Relat√≥rio de Cursos</h3>
                        <p style="color: var(--color-text-secondary); margin-bottom: 1rem;">
                            An√°lise detalhada dos cursos e suas mat√©rias
                        </p>
                        <button class="btn btn-secondary" onclick="generateReport('courses')">
                            üìä Ver Relat√≥rio
                        </button>
                    </div>

                    <div class="dashboard-card">
                        <h3 style="margin-bottom: 1rem; color: var(--color-primary);">Relat√≥rio de Professores</h3>
                        <p style="color: var(--color-text-secondary); margin-bottom: 1rem;">
                            Carga de trabalho e ofertas por professor
                        </p>
                        <button class="btn btn-secondary" onclick="generateReport('professors')">
                            üìä Ver Relat√≥rio
                        </button>
                    </div>

                    <div class="dashboard-card">
                        <h3 style="margin-bottom: 1rem; color: var(--color-accent);">Dashboard Geral</h3>
                        <p style="color: var(--color-text-secondary); margin-bottom: 1rem;">
                            Vis√£o completa de todas as estat√≠sticas do sistema
                        </p>
                        <button class="btn btn-accent" onclick="generateReport('dashboard')">
                            üìà Ver Dashboard
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Dynamic Modal Container -->
    <div id="modalContainer"></div>

    <!-- Scripts de integra√ß√£o com backend -->
    <script src="scripts/api-service.js"></script>
    <script src="scripts/crud-operations.js"></script>
    
    <!-- Script principal da aplica√ß√£o -->
    <script src="scripts/app.js"></script>
</body>
</html>
